#!/bin/bash

# Quick Start Guide for the Creator Sponsorship Platform
# Run this script to get setup information

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘     Creator Sponsorship Platform - Quick Start Guide          â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "ğŸ“‹ PROJECT STRUCTURE"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "copilot-sponsorship/"
echo "â”œâ”€â”€ frontend/              Next.js React application (port 3000)"
echo "â”œâ”€â”€ sponsorship-backend/   Go REST API (port 8080)"
echo "â””â”€â”€ README.md              Main project documentation"
echo ""

echo "ğŸš€ QUICK START (5 minutes)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "Step 1: Verify Setup"
echo "  $ ./verify-setup.sh"
echo ""

echo "Step 2: Start Backend (Terminal 1)"
echo "  $ cd sponsorship-backend"
echo "  $ go run main.go"
echo "  âœ“ Server will start on http://localhost:8080"
echo ""

echo "Step 3: Start Frontend (Terminal 2)"
echo "  $ cd frontend"
echo "  $ npm run dev"
echo "  âœ“ Open http://localhost:3000 in your browser"
echo ""

echo "ğŸ“Œ PREREQUISITES"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ“ Go 1.21+"
echo "âœ“ Node.js 18+"
echo "âœ“ PostgreSQL 14+"
echo "âœ“ npm or pnpm"
echo ""

echo "ğŸ”§ CONFIGURATION"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Frontend:     frontend/.env.local (already configured)"
echo "Backend:      sponsorship-backend/.env (needs database setup)"
echo ""

echo "ğŸ—„ï¸  DATABASE SETUP (Required)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "See: sponsorship-backend/README.md#database-setup"
echo ""
echo "Quick steps:"
echo "  1. Create PostgreSQL database:"
echo "     psql -U postgres"
echo "     CREATE DATABASE sponsorship_db;"
echo "     CREATE USER sponsorship_user WITH PASSWORD 'password';"
echo "     GRANT ALL PRIVILEGES ON DATABASE sponsorship_db TO sponsorship_user;"
echo ""
echo "  2. Create tables (see backend README for SQL schema)"
echo ""

echo "ğŸ“š DOCUMENTATION"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“– Main README:              README.md"
echo "ğŸ“– Backend README:           sponsorship-backend/README.md"
echo "ğŸ“– Frontend README:          frontend/README.md"
echo "ğŸ“– Integration Details:      INTEGRATION_SUMMARY.md"
echo ""

echo "ğŸ§ª TESTING THE INTEGRATION"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "1. Backend health check:"
echo "   curl http://localhost:8080/health"
echo ""
echo "2. Register account:"
echo "   curl -X POST http://localhost:8080/api/auth/register \\"
echo "     -H 'Content-Type: application/json' \\"
echo "     -d '{\"email\":\"test@example.com\",\"password\":\"test123\"}'"
echo ""
echo "3. Login:"
echo "   curl -X POST http://localhost:8080/api/auth/login \\"
echo "     -H 'Content-Type: application/json' \\"
echo "     -d '{\"email\":\"test@example.com\",\"password\":\"test123\"}'"
echo ""

echo "ğŸ”— API ENDPOINTS"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Authentication:"
echo "  POST   /api/auth/login          Login user"
echo "  POST   /api/auth/register       Register new user"
echo ""
echo "Sponsorships:"
echo "  GET    /api/sponsorships        List all sponsorships"
echo "  POST   /api/sponsorships        Create sponsorship"
echo "  GET    /api/sponsorships/:id    Get sponsorship details"
echo "  PUT    /api/sponsorships/:id    Update sponsorship"
echo "  DELETE /api/sponsorships/:id    Delete sponsorship"
echo ""
echo "Analytics:"
echo "  GET    /api/dashboard/stats     Dashboard statistics"
echo ""

echo "ğŸ› TROUBLESHOOTING"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Port already in use:"
echo "  Backend (8080):  lsof -i :8080 | grep LISTEN | awk '{print \$2}' | xargs kill -9"
echo "  Frontend (3000): lsof -i :3000 | grep LISTEN | awk '{print \$2}' | xargs kill -9"
echo ""
echo "Database connection failed:"
echo "  - Check PostgreSQL is running"
echo "  - Verify .env credentials match database"
echo "  - Ensure database and user exist"
echo ""
echo "Frontend can't reach backend:"
echo "  - Verify NEXT_PUBLIC_API_URL in frontend/.env.local"
echo "  - Check backend is running on port 8080"
echo "  - Verify CORS_ALLOWED_ORIGINS in backend/.env"
echo ""

echo "âœ… You're all set!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Run verify-setup.sh to check your environment before starting."
echo ""
